---
layout: default
---

<article class="recipe-single">
    <header class="recipe-header">
        <h1 class="recipe-title">{{ page.title }}</h1>
        {% if page.description %}
            <p class="recipe-description">{{ page.description }}</p>
        {% endif %}

        {% comment %} Opcjonalne wyświetlanie daty publikacji/modyfikacji {% endcomment %}
        {% if page.date %}
            <p class="recipe-date">Opublikowano: <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%d %b %Y" }}</time></p>
        {% endif %}
        {% if page.last_modified_at %}
            <p class="recipe-date">Ostatnia aktualizacja: <time datetime="{{ page.last_modified_at | date_to_xmlschema }}">{{ page.last_modified_at | date: "%d %b %Y" }}</time></p>
        {% endif %}
    </header>

    <div class="recipe-content-wrapper">
        <aside class="recipe-main-info"> {% comment %} Zmieniono z div na aside dla lepszej semantyki {% endcomment %}
            {% comment %}
            Logika wyświetlania obrazka:
            Preferuje page.image_main.
            Jeśli page.image_main jest puste, używa site.data.placeholders.recipe_image (z _data/placeholders.yml).
            W ostateczności używa domyślnej ścieżki /images/general/placeholder-recipe.jpg.
            {% endcomment %}
            {% assign default_placeholder_path = '/images/general/placeholder-recipe.jpg' %}
            {% assign final_image_path = page.image_main | default: site.data.placeholders.recipe_image | default: default_placeholder_path %}
            
            <img src="{{ final_image_path | relative_url }}" alt="{{ page.title | default: 'Brak zdjęcia przepisu' }}" class="recipe-main-image">
            
            <div class="recipe-details">
                {% if page.time %}
                    <p><strong>Czas przygotowania:</strong> {{ page.time }}</p>
                {% endif %}
                {% if page.servings %} {# Poprawiono na 'servings' #}
                    <p><strong>Liczba porcji:</strong> {{ page.servings }}</p>
                {% endif %}
                {% if page.difficulty %}
                    <p><strong>Poziom trudności:</strong> {{ page.difficulty }}</p>
                {% endif %}
                {% if page.notes %}
                    <p><strong>Uwagi:</strong> {{ page.notes }}</p>
                {% endif %}
                <button class="print-button" onclick="window.print()" aria-label="Drukuj przepis">Drukuj przepis</button>
            </div>
        </aside>

        {% if page.ingredients %}
            <section class="recipe-ingredients">
                <h2>Składniki</h2>
                <ul>
                    {% for ingredient in page.ingredients %}
                        <li>{{ ingredient }}</li>
                    {% endfor %}
                </ul>
            </section>
        {% endif %}

        {% if page.preparation %}
            <section class="recipe-preparation">
                <h2>Przygotowanie</h2>
                <ol>
                    {% for step in page.preparation %}
                        <li>{{ step }}</li>
                    {% endfor %}
                </ol>
            </section>
        {% endif %}

        {% comment %} Jeśli masz jakąś dodatkową treść markdown, która nie jest składnikami/przygotowaniem,
           pozostaw poniższy blok. W przeciwnym razie możesz go usunąć. {% endcomment %}
        {% if content != "" %}
             <section class="recipe-additional-content">
                 {{ content }}
             </section>
        {% endif %}
    </div>


    {% if page.category %}
        {% assign category_name = "" %}
        {% for cat in site.data.categories %}
            {% if cat.slug == page.category %}
                {% assign category_name = cat.name %}
                {% break %}
            {% endif %}
        {% endfor %}

        <div class="button-container recipe-single-button-container">
           
            <a href="{{ '/categories/' | relative_url }}{{ page.category }}.html" class="button primary-button" aria-label="Wróć do przepisów w kategorii {{ category_name | default: page.category | escape }}">
                « Wszystkie przepisy w {{ category_name | default: 'tej kategorii' }}
            </a>
         
            <a href="{{ '/' | relative_url }}#kategorie" class="button primary-button" aria-label="Wróć do wszystkich kategorii na stronie głównej">
                Wszystkie kategorie
            </a>
        </div>
    {% else %}

        <div class="button-container recipe-single-button-container">
            <a href="{{ '/' | relative_url }}#kategorie" class="button primary-button" aria-label="Wróć do wszystkich kategorii na stronie głównej">
                Wszystkie kategorie
            </a>
        </div>
    {% endif %}

</article>

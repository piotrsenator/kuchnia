---
layout: default
permalink: /category/:category/
---

<div class="content">
    <header class="page-header">
        {# Pobieramy slug kategorii z URL-a (np. "dania-glowne-miesne") #}
        {% assign category_slug = page.category %}
        
        {# Formatujemy slug na czytelną nazwę (np. "Dania Główne Mięsne") #}
        {% assign category_name_formatted = category_slug | replace: '-', ' ' | replace: '_', ' ' | capitalize %}
        
        {# Dodatkowo, spróbujmy znaleźć opis kategorii z _data/categories.yml #}
        {% assign current_category_data = site.data.categories | where: "slug", category_slug | first %}

        <h1>Kategoria: {{ category_name_formatted }}</h1>
        {% if current_category_data.description %}
            <p class="page-description">{{ current_category_data.description }}</p>
        {% else %}
            <p class="page-description">Wszystkie przepisy w kategorii {{ category_name_formatted }}.</p>
        {% endif %}
    </header>

    <section class="recipes-grid-section">
        <h2 class="section-title">Przepisy</h2>
        <div class="recipes-grid">
            {# Filtrujemy przepisy z kolekcji 'recipes' na podstawie kategorii #}
            {# Sprawdzamy, czy 'item.category' jest równe slugowi LUB czy 'item.categories' (jeśli istnieje) zawiera slug #}
            {% assign filtered_recipes = site.recipes | where_exp:"item", "item.category == category_slug or (item.categories and item.categories contains category_slug)" %}
            
            {% if filtered_recipes.size > 0 %}
                {% for recipe in filtered_recipes %}
                    {% include recipe_card.html recipe=recipe %}
                {% endfor %}
            {% else %}
                <p>Brak przepisów w tej kategorii.</p>
            {% endif %}
        </div>
    </section>
    
    <div class="button-container">
        <a href="{{ '/categories/' | relative_url }}" class="button secondary-button">Wróć do wszystkich kategorii</a>
    </div>
</div>
